<project name="Picsou Client" basedir="../..">

  <taskdef name="jarbundler" classname="net.sourceforge.jarbundler.JarBundler"/>

  <property name="version" value="0.2"/>
  <property name="picsou.jar" value="picsou-${version}.jar"/>
  <property name="reflibdir" value=".."/>
  <property name="globsdir" value="../../globs"/>
  <property name="splitsdir" value="../../splits"/>
  <property name="packaging" value="dev/deploy/"/>

  <target name="CreateMacPackage">
    <property name="appDir" value="generated/macosx/Picsou"/>
    <property name="dmgFile" value="generated/macosx/picsou-${version}.dmg"/>

    <delete dir="${appDir}"/>

    <mkdir dir="${appDir}"/>

    <jarbundler dir="${appDir}"
                name="Picsou"
                mainclass="org.designup.picsou.gui.PicsouApplication"
                jar="generated/${picsou.jar}"
                icon="dev/images/fourmics_icon.icns"
                jvmversion="1.5*">
      <documenttype name="OFX Document"
                    extensions="ofx"
                    role="Viewer"/>
    </jarbundler>

    <exec executable="hdiutil">
      <arg line="create -srcfolder ${appDir} ${dmgFile}"/>
    </exec>
  </target>

</project>