<project name="Picsou Applet/JWS" default="Predeliver" basedir="../..">
  <!--
    To create the keystore:
      ~/Code/Picsou/dev rmedina$ keytool -genkey -alias Picsou -keystore picsou.keys
      Enter keystore password:  ninja600
      Re-enter new password: ninja600
      What is your first and last name?
        [Unknown]:  Regis Medina
      What is the name of your organizational unit?
        [Unknown]:  Picsou
      What is the name of your organization?
        [Unknown]:  Picsou
      What is the name of your City or Locality?
        [Unknown]:  Paris
      What is the name of your State or Province?
        [Unknown]:
      What is the two-letter country code for this unit?
        [Unknown]:  FR
  -->
  <target name="CopyHtmlIndexFile">
    <copy todir="generated/applet" overwrite="true">
      <fileset file="dev/web/index.html"/>
    </copy>
  </target>

  <target name="GenerateApplet" depends="Predeliver, CopyHtmlIndexFile">
    <copy todir="generated/applet" overwrite="true">
      <fileset file="generated/${picsou.jar}"/>
    </copy>
    <signjar alias="Picsou" keystore="dev/budgetview.keys"
             storepass="ninja600">
      <fileset dir="generated/applet" includes="**/*.jar"/>
    </signjar>
  </target>

  <target name="Publish" depends="GenerateApplet">
    <ftp
      server="privftp.pro.proxad.net" userid="webmaster@design-up.com" password="zx-600r"
      remotedir="picsou"
      passive="yes"
      verbose="yes">
      <fileset dir="dev/web">
        <include name="index.html"/>
      </fileset>
      <fileset dir="dev">
        <include name="budgetview.jnlp"/>
      </fileset>
      <fileset dir="generated/applet">
        <include name="${picsou.jar}"/>
      </fileset>
    </ftp>
  </target>

  <target name="PublishJNLP">
    <ftp
      server="privftp.pro.proxad.net" userid="webmaster@design-up.com" password="zx-600r"
      remotedir="picsou"
      passive="yes"
      verbose="yes">
      <fileset dir="dev/web">
        <include name="index.html"/>
      </fileset>
      <fileset dir="dev">
        <include name="budgetview.jnlp"/>
      </fileset>
    </ftp>
  </target>
</project>